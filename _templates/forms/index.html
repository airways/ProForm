{embed="global/_header"}

<style type="text/css">
    .error {
        color: red;
    }
    span.required {
        color: red;
    }
    .fieldRow {
        clear:both;
        border: 1px dotted red;
    }
    .fieldRow li {
        display: inline;
        height: 30px;
        border: 1px dotted blue;
    }
    .clear {
        clear: both;
    }
</style>
<h2>Contact Form</h2>

<h3>Dynamic Fields Loop</h3>
{exp:proform:form form_name="{segment_2}" notify="iraway+test1@nerdery.com"
    thank_you_url="{path=forms/thank_you}" thank_you_message="Thanks for filling that there contact form"
    download_url="{path='test.zip'}" download_label="Test!"}

{if form_type == "saef"}
{preview}
<h1>{title}</h1>

{display_custom_fields}

{/preview}


<table>
<tr>
<td>


<p>Title<br />
<input type="text" name="title" id="title" value="{title}" size="50" maxlength="100" onkeyup="liveUrlTitle();"  /></p>

<p>URL Title<br />
<input type="text" name="url_title"  id='url_title' value="{url_title}" maxlength="75" size="50" /></p>

{custom_fields}
{if required}* {/if}{field_label}<br />
{field_instructions}

{if textarea}
<textarea id="{field_name}" name="{field_name}" dir="{text_direction}" cols="50" rows="{rows}">{field_data}</textarea><br />
{/if}

{if textinput}
<input type="text" dir="{text_direction}" id="{field_name}" name="{field_name}" value="{field_data}" maxlength="{maxlength}" size="50" /><br />
{/if}

{if pulldown}
<select id="{field_name}" name="{field_name}">
{options}<option value="{option_value}"{selected}>{option_name}</option>{/options}<br />
</select>
{/if}

{if date}
<input type="text" id="{field_name}" name="{field_name}" value="{field_data}" maxlength="{maxlength}" size="50" /><br />
{/if}

{if relationship}
<select id="{field_name}" name="{field_name}">
{options}<option value="{option_value}"{selected}>{option_name}</option>{/options}<br />
</select>
{/if}

{if multiselect}
<select id="{field_name}" name="{field_name}[]" multiple="multiple">
{options}<option value="{option_value}"{selected}>{option_name}</option>{/options}
</select>
{/if}

{if checkbox}
{options}{option_value} <input type="checkbox" id="{field_name}" name="{field_name}[]" value="{option_value}"{checked} />
{/options}
{/if}

{if radio}
{options}{option_value} <input type="radio" id="{field_name}" name="{field_name}" value="{option_value}"{checked} />
{/options}
{/if}

{if file}
	{file}
{/if}

{/custom_fields}


</td>
<td valign="top">

<input type="submit" name="submit" value="Submit" />
<input type="submit" name="preview" value="Preview" />

{status_menu}
<p>Status<br />
<select name="status">
{select_options}
</select>
</p>
{/status_menu}

<p>Date <br />
<input type="text" name="entry_date" value="{entry_date}" maxlength="23" size="25" /></p>

<p>Expiration Date <br />
<input type="text" name="expiration_date" value="{expiration_date}" maxlength="23" size="25" /></p>

<p>Comment Expiration Date <br />
<input type="text" name="comment_expiration_date" value="{comment_expiration_date}" maxlength="23" size="25" /></p>

<p><input type="checkbox" name="sticky" value="y"  {sticky} /> Make Entry Sticky</p>
<p><input type="checkbox" name="allow_comments" value="y" {allow_comments} /> Allow Comments</p>
<p><input type='checkbox' name='dst_enabled' value='y' {dst_enabled} />DST Active on Date of Entry</p>

{ping_servers}
<p>Ping Servers<br />
{ping_row}
<input type="checkbox" name="ping[]" value="{ping_value}" {ping_checked} /> {ping_server_name}<br />
{/ping_row}
</p>
{/ping_servers}

{category_menu}
<p>Categories<br />
<select name="category[]" size="4" multiple="multiple">
{select_options}
</select>
</p>
{/category_menu}

</td>
</tr>
</table>

{if:else}
    errors = {error_count}
    {if error_count}
    <div class="errors">
        <p>The form has the following errors:</p>
        <ul>
        {errors}
            <li>{error}</li>
        {/errors}
        </ul>
    </div>
    {/if}
    {if complete}
        Thank you!
    {if:else}
        {!-- render all hidden fields in one place - you can also do these inline if you like --}
        {fields}
            {if field_control == 'hidden'}
                <input type="{field_control}" name="{field_name}" value="{field_value}" />
            {/if}
        {/fields}

        {!-- render normal fields in aligned rows --}
        {fieldrows}
            {!-- check if the row contains only hidden fields. if so, skip it because we already
                 rendered it's fields. --}
            {if fieldrow:count > fieldrow:hidden_count}
                <ul class="fieldRow">

                {fields}
                    {if field_control != 'hidden'}{!-- skip hidden fields --}
                        <li id="{field_html_id}" class="{if field_error}error{/if} {if field_is_required}required{/if} {field_html_class}">
                            {field_extra_1}
                            <label for="{field_name}">
                                {field_label}
                                {if field_is_required}
                                    <span class="required">*</span>
                                {/if}
                            </label>

                            {if field_control == 'textarea'}
                                <textarea name="{field_name}" id="{field_name}" cols="40" rows="10">{field_value}{if error_count == 0}{field_preset_value}{/if}</textarea>
                            {if:elseif field_control == 'checkbox'}
                                <input type="{field_control}" id="{field_name}" name="{field_name}" value="y" {field_checked} 
                                    {if field_preset_value == 'y' AND error_count == 0}checked="checked" class="default" {/if} />
                            {if:elseif field_control == 'select'}

                                <select id="{field_name}" name="{field_name}">
                                    {field_setting_list}
                                        <option value="{row}">{row}</option>
                                    {/field_setting_list}
                                </select>
                            {if:else}
                                <input type="{field_control}" id="{field_name}" name="{field_name}" value="{field_value}{if error_count == 0}{field_preset_value}{/if}" />
                            {/if}
                            {field_error}
                            {field_extra_2}
                        </li>
                    {/if}
                {/fields}
                </ul>
            {/if}
        {/fieldrows}


        Enter this word: {captcha}<p/>
        <input type="text" name="captcha" />{if error:captcha}<span class="error">{error:captcha}</span>{/if}

        <p/>
        <input type="submit" />
    {/if}
{/if}
{/exp:proform:form}


{embed="global/_footer"}